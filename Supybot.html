<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" /> <meta name="description" content="Security issues in the latest released version of stock Supybot, how to avoid them without switching to a fork and how to switch to forks." /> <meta name="keywords" content="Security,Issues,Supybot,crash,Debian,Ubuntu,IRC,Python,Python 2,Python 3,python -m pip," /> <meta name="author" content="Mikaela Suomalainen" /> <link rel="canonical" href="https://mkaysi.github.io/limnoria/Supybot.html">
<title>
Security issues of Supybot
</title>
<link rel="stylesheet" type="text/css" href="css.css" />
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-40171169-1', 'mkaysi.github.io');
ga('send', 'pageview');
</script>
</head>
<body>

<p>All activity happens in git repository of Supybot nowadays and it happens seldomly. The latest version, which was released in 2009 is 0.83.4.1 has multiple security issues documented here. This version is available from Debian repositories, Ubuntu repositories and repositories of many other Linux distributions.</p>
<p><strong>Note: Development has moved from SourceForge to GitHub so I won't refer to the old SF page.</strong></p>
<h2 id="the-issues-of-0.83.4.1.">The issues of 0.83.4.1.</h2>
<h3 id="anyone-can-crash-it-and-computer-where-its-running-on">1. Anyone can crash it and computer where it's running on</h3>
<p>And this is very easy. Just run the command</p>
<pre><code>!misc last --regexp m/(.*\w){512}/</code></pre>
<p>where ! is the prefix character.</p>
<p>Misc is loaded by default and cannot be unloaded without modifying the config.</p>
<h3 id="the-previous-wasnt-the-only-way-to-do-this">2. The previous wasn't the only way to do this</h3>
<p>Everyone can also make the bot count an equation, which brings it and the host computer down.</p>
<p>For example:</p>
<pre><code>!math calc factorial(999999)</code></pre>
<p>This requires Math plugin which comes with Supybot, but isn't load by default.</p>
<h3 id="anyone-can-access-network-services-via-the-bot.">3. Anyone can access network services via the bot.</h3>
<p>I don't have example command for this, but it happens by nesting &quot;format cut&quot; and &quot;misc tell&quot;.</p>
<p>What does this mean? Anyone can tell the bot to ghost someone else on same account, take over a channel by telling the bot to give flags (if it has correct flags), change password of the account and everything else what you do with network services.</p>
<h3 id="web-page-with-special-characters-in-title-can-be-used-to-send-dccctcp-commands.">4. Web page with special characters in &lt;title&gt; can be used to send DCC/CTCP commands.</h3>
<p>This doesn't mean only things like CTCP actions (also known as /me), but known problems with old routers ( <code>FF ? DCC SEND “ff???f??????????????” 0 0 0</code> ) which make them reconnect to the internet.</p>
<p>Usage:</p>
<pre><code>!web title &lt;malicious.page.here&gt;
!web fetch &lt;malicious.page.here&gt;</code></pre>
<h3 id="are-these-issues-publicly-known">Are these issues publicly known?</h3>
<p><strong>Of course they are.</strong> They have been reported to</p>
<ul class="incremental">
<li><a href="https://ubuntu.com">Ubuntu</a>
<ul class="incremental">
<li><a href="http://pad.lv/996947]">issue 1</a></li>
<li><a href="http://pad.lv/996950">issue 2</a></li>
</ul></li>
<li><a href="https://debian.org/">Debian</a>
<ul class="incremental">
<li><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=672214">issue 1</a></li>
<li><a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=672215">issue 2</a></li>
</ul></li>
<li><a href="ircs://chat.freenode.net:6697/#supybot">#supybot</a></li>
</ul>
<p>The first issue has been also used to take down some of <a href="https://wiki.ubuntu.com/IRC/Bots">Ubuntu IRC bots</a> several times. At least UbotX (I don't remember the number) and meetingology.</p>
<p>Some of these issues are fixed in git repository, but most people aren't using it. If you wish to start using it, please scroll down to installation instructions lower this page even though <a href="https://github.com/ProgVal/Limnoria">Limnoria</a> and <a href="http://github.com/nanotube/supybot_fixes">gribble</a> are more recommended.</p>
<h3 id="how-to-avoid-them">How to avoid them?</h3>
<p>You can add anticapability for these commands using <code>owner defaultcapability</code>, but that is only a temporary solution. There can also be other issues.</p>
<p>There are also two active Supybot forks, known as <a href="https://github.com/ProgVal/Limnoria">Limnoria</a> and <a href="http://github.com/nanotube/supybot_fixes">Gribble</a>, which are actively developed and have fixed these issues. If you want permanent solution, you should install either of them.</p>
<p>I recommend <a href="https://github.com/ProgVal/Limnoria">Limnoria</a> * it seems to be more actively developed. * (activity of <a href="http://github.com/nanotube/supybot_fixes">Gribble</a> isn't announced anywhere) * it has additional * commands * translations support * plugins * <a href="https://github.com/ProgVal/Limnoria/tree/master/plugins/PluginDownloader">PluginDownloader</a>, which makes installing of 3rd party plugins easy. * NickAuth * Allows identifying to the bot using NickServ account. * all changes of <a href="http://github.com/nanotube/supybot_fixes">Gribble</a>. * Conditional &amp; MessageParser * [Limnoria also supports SASL and CertFP], which are methods to <a href="https://mkaysi.github.io/pages/external/identifying.html">identify to services automatically.</a></p>
<h2 id="interesting-things">Interesting things</h2>
<ul class="incremental">
<li><a href="https://www.openhub.net/p/compare?project_0=Limnoria&amp;project_1=Gribble%3A+Support+Bottie&amp;project_2=Supybot">Comparsion of commit activity between Limnoria, Gribble and Supybot</a>.</li>
<li><a href="https://sourceforge.net/p/gribble/wiki/Gribble_Project_Git_Repository/">Gribble's modifications to stock Supybot</a>
<ul class="incremental">
<li>SourceForge and that link are a little broken, when they are moved elsewhere, please remove this notice!</li>
</ul></li>
<li><a href="https://github.com/ProgVal/Limnoria/wiki/LGC">Limnoria's modifications to Gribble.</a>
<ul class="incremental">
<li>Features of Gribble are fully merged to Limnoria.</li>
</ul></li>
</ul>
<p>Your current botname.conf is <strong>100% compatible with forks</strong>.</p>
<p><a href="ircs://chat.freenode.net:6697/#supybot,#gribble,#limnoria">Join Supybot channels on freenode!</a></p>
<h2 id="installing-forks">Installing forks</h2>
<h3 id="for-all-of-them.">For all of them.</h3>
<p>You should install <a href="http://python%20-m%20pip.readthedocs.org/en/latest/reference/python%20-m%20pip_install.html">python -m pip</a> (usually python-python -m pip in repositories) and <a href="http://git-scm.com/">git</a>.</p>
<p>Windows users should also install <a href="http://python%20-m%20pip.readthedocs.org/en/latest/reference/python%20-m%20pip_install.html">python -m pip</a> and <a href="https://msysgit.github.io/">msysgit</a> and in <a href="https://msysgit.github.io/">msysgit</a> select to run <strong>unix tools in PATH</strong>.</p>
<p>Note: python -m pip is included with Python =&lt; 3.4! Python 3 is only supported by Limnoria.</p>
<p>For <strong>rootless installation</strong>, please see <a href="http://supybot.aperio.fr/doc/use/install.html#local-installation">Limnoria's documentation.</a> which you should be able to modify to install stock Supybot or gribble with the information below.</p>
<p>If you don't have sudo, please simply remove it from beginnings of lines and run the commands as root or Administrator.</p>
<h3 id="supybot">Supybot</h3>
<p><strong>Not recommended as it's not actively developed.</strong></p>
<pre><code>sudo python -m pip install git+https://github.com/supybot/supybot.git --upgrade</code></pre>
<h3 id="gribble">gribble</h3>
<p>Less actively developed than Limnoria and doesn't support Python 3.</p>
<pre><code>sudo python -m pip install git+https://github.com/nanotube/supybot_fixes.git --upgrade</code></pre>
<h3 id="limnoria">Limnoria</h3>
<p>At the time of writing, the most active Supybot fork which includes embedded HTTPd for plugins needing it, supports other languages than English and also runs with Python 3.</p>
<p>The first command installs requirements of Limnoria and the second Limnoria itself. Only Limnoria has requirements.txt file at the moment.</p>
<pre><code>sudo python -m pip install -r https://raw.githubusercontent.com/ProgVal/Limnoria/master/requirements.txt --upgrade
sudo python -m pip install git+https://github.com/ProgVal/Limnoria.git@master --upgrade</code></pre>
<hr/>
<a href="https://github.com/Mkaysi/Limnoria/commits/gh-pages/Supybot.html">Changelog of this page.</a>
<hr/>
</body>
</html>


